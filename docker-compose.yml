version: '3.8'

services:
  # --- Nossas Ilhas (Workers) ---
  island-1:
    build: ./worker
    volumes:
      - ./data:/app/data # Monta a pasta de dados para o container ver o CSV

  island-2:
    build: ./worker
    volumes:
      - ./data:/app/data

  island-3:
    build: ./worker
    volumes:
      - ./data:/app/data

  # --- O Gerente (Coordinator) ---
  coordinator:
    build: ./coordinator
    depends_on:
      - island-1
      - island-2
      - island-3
    environment:
      # Aqui definimos quem s√£o as ilhas para o Go saber
      - ISLANDS=http://island-1:8000,http://island-2:8000,http://island-3:8000
